(self.webpackChunkmi_app=self.webpackChunkmi_app||[]).push([[54],{9054:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LoginModule:()=>y});var n=i(1116),r=i(3337),o=i(1041),a=i(2935),s=i(1014),c=i(5366),u=i(4519);class l{constructor(t,e){this.Username=t,this.Password=e}}var d=i(2693),p=i(9438);let h=(()=>{class t{constructor(t,e){this.httpClient=t,this.gb=e,this._url="/api/login/authenticate",this._url=this.gb.WS+this._url}Authenticate(t,e){const i=new l(t,e);return this.httpClient.post(this._url,i)}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(d.eN),c.LFG(p.O))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i(3589);class Z{constructor(t,e){this.usr=t,this.keyApi=e}}var m=i(9996);let f=(()=>{class t{constructor(t,e){this.httpClient=t,this.gb=e,this._url="/api/Usuario",this._url=this.gb.WS+this._url}GetByParam(t){const e={headers:new d.WM({"Content-Type":"application/json"})};return this.httpClient.post(this._url+"/GetByParam",t,e).pipe((0,m.U)(t=>t.map(t=>new Z(t.usr,t.keyApi))))}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(d.eN),c.LFG(p.O))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=i(4369),v=i(7307),k=i(3070),w=i(9550);function C(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"button",3),c.NdJ("click",function(){return c.CHM(t),c.oxw().Regresar()}),c.TgZ(2,"mat-icon",4),c._uU(3,"close"),c.qZA(),c.qZA(),c.qZA()}}function q(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().Regresar()}),c.TgZ(2,"mat-icon",4),c._uU(3,"close"),c.qZA(),c.qZA(),c.qZA()}}function T(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",7),c.TgZ(2,"form",8,9),c.TgZ(4,"h2"),c._uU(5,"Iniciar sesi\xf3n"),c.qZA(),c.TgZ(6,"div",10),c.TgZ(7,"h3"),c._uU(8,"Email"),c.qZA(),c.TgZ(9,"mat-form-field",11),c.TgZ(10,"input",12),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().username=e})("keyup.enter",function(){c.CHM(t);const e=c.oxw();return e.clickAceptar(),e.login()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",10),c.TgZ(12,"h3"),c._uU(13,"Contrase\xf1a"),c.qZA(),c.TgZ(14,"mat-form-field",11),c.TgZ(15,"input",13),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().password=e})("keyup.enter",function(){c.CHM(t);const e=c.oxw();return e.clickAceptar(),e.login()}),c.qZA(),c.TgZ(16,"button",14),c.NdJ("mouseenter",function(){c.CHM(t);const e=c.oxw();return e.hideNC=!e.hideNC}),c.TgZ(17,"mat-icon"),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",15),c.TgZ(20,"button",16),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.clickAceptar(),e.login()}),c._uU(21," Aceptar "),c.qZA(),c.qZA(),c._UZ(22,"br"),c._UZ(23,"br"),c._UZ(24,"br"),c._UZ(25,"br"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(10),c.Q6J("ngModel",t.username),c.xp6(5),c.Q6J("type",t.hideNC?"password":"text")("ngModel",t.password),c.xp6(1),c.uIk("aria-label","Ocultar contrase\xf1a")("aria-pressed",t.hideNC),c.xp6(2),c.Oqu(t.hideNC?"visibility_off":"visibility"),c.xp6(1),c.Q6J("hidden",t.clicked)}}function b(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",17),c.TgZ(2,"form",8,9),c.TgZ(4,"h2"),c._uU(5,"Iniciar sesi\xf3n"),c.qZA(),c.TgZ(6,"div",10),c.TgZ(7,"h3"),c._uU(8,"Email"),c.qZA(),c.TgZ(9,"mat-form-field",11),c.TgZ(10,"input",12),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().username=e})("keyup.enter",function(){c.CHM(t);const e=c.oxw();return e.clickAceptar(),e.login()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",10),c.TgZ(12,"h3"),c._uU(13,"Contrase\xf1a"),c.qZA(),c.TgZ(14,"mat-form-field",11),c.TgZ(15,"input",13),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().password=e})("keyup.enter",function(){c.CHM(t);const e=c.oxw();return e.clickAceptar(),e.login()}),c.qZA(),c.TgZ(16,"button",14),c.NdJ("mouseenter",function(){c.CHM(t);const e=c.oxw();return e.hideNC=!e.hideNC}),c.TgZ(17,"mat-icon"),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",15),c.TgZ(20,"button",16),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.clickAceptar(),e.login()}),c._uU(21," Aceptar "),c.qZA(),c.qZA(),c._UZ(22,"br"),c._UZ(23,"br"),c._UZ(24,"br"),c._UZ(25,"br"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(10),c.Q6J("ngModel",t.username),c.xp6(5),c.Q6J("type",t.hideNC?"password":"text")("ngModel",t.password),c.xp6(1),c.uIk("aria-label","Ocultar contrase\xf1a")("aria-pressed",t.hideNC),c.xp6(2),c.Oqu(t.hideNC?"visibility_off":"visibility"),c.xp6(1),c.Q6J("hidden",t.clicked)}}let x=(()=>{class t{constructor(t,e,i,n,r,o){this.router=t,this.dataService=e,this._loguinData=i,this.dialog=n,this.snackBar=r,this._UsuariosHttpService=o,this.mensajePopUp="",this.mensajePopUpId=30,this.isDesktop=!1,this.altura=0,this.ancho=0,this.username="",this.password="",this.hideCA=!0,this.hideNC=!0,this.hideRC=!0,this.clicked=!1,window.addEventListener("beforeunload",this.AvisarSalidaSitio)}AvisarSalidaSitio(t){t.returnValue=""}clickAceptar(){this.clicked=!0}ngOnDestroy(){window.removeEventListener("beforeunload",this.AvisarSalidaSitio)}ngOnInit(){this.altura=.2*window.innerHeight,this.ancho=window.innerWidth,localStorage.setItem("token",""),this.dataService.validtoken("false"),localStorage.setItem("usrName","");const t=window.innerWidth;this.isDesktop=!(t<=700)}login(){this._loguinData.Authenticate(this.username,this.password).subscribe(t=>this.AccionesDeLog(t)),this.clicked=!1}AccionesDeLog(t){if(""!==t)if(!0===t.includes("cuenta")||!0===t.includes("Contrase\xf1a")){const e=new a.vA;e.autoFocus=!0,e.data={alerta:t},this.dialog.open(s.$,e)}else{let e;this.dataService.UserName(this.username),localStorage.setItem("token",t),this.dataService.validtoken("true"),e={usr:this.username,keyApi:""},this._UsuariosHttpService.GetByParam(e).subscribe(t=>this.Redirigir(t[0]))}}Redirigir(t){localStorage.setItem("keyApi",t.keyApi),this.router.navigate(["home"])}Regresar(){this.router.navigate(["home"])}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(r.F0),c.Y36(u.D),c.Y36(h),c.Y36(a.uw),c.Y36(g.ux),c.Y36(f))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-login"]],decls:5,vars:4,consts:[[1,"mat-typography",2,"height","93%"],[4,"ngIf"],["class","mat-typography",4,"ngIf"],["mat-icon-button","","title","Cerrar",1,"cerrar",3,"click"],["aria-hidden","false"],["mat-icon-button","","title","Cerrar",1,"cerrar-mov",3,"click"],[1,"mat-typography"],[2,"display","block","padding","40px","width","300px","float","right"],["novalidate",""],["f","ngForm"],[1,"form-Group"],["appearance","outline",1,"all-width"],["matNativeControl","","name","username","required","",3,"ngModel","ngModelChange","keyup.enter"],["matNativeControl","","required","","name","password",3,"type","ngModel","ngModelChange","keyup.enter"],["matRipple","","mat-icon-button","","matSuffix","",3,"mouseenter"],[3,"hidden"],["matRipple","","mat-raised-button","","color","primary",3,"click"],[2,"display","block","padding","16px"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.YNc(1,C,4,0,"div",1),c.YNc(2,q,4,0,"div",1),c.YNc(3,T,26,7,"div",2),c.YNc(4,b,26,7,"div",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",e.isDesktop),c.xp6(1),c.Q6J("ngIf",!e.isDesktop),c.xp6(1),c.Q6J("ngIf",e.isDesktop),c.xp6(1),c.Q6J("ngIf",!e.isDesktop))},directives:[n.O5,A.lW,v.Hw,o._Y,o.JL,o.F,k.KE,w.Nt,o.Fj,o.Q7,o.JJ,o.On,k.R9],styles:[".router-link[_ngcontent-%COMP%]{color:#4b79ed;font-size:medium}.cerrar[_ngcontent-%COMP%]{top:64px!important;right:17px!important}"]}),t})();const _=[{path:":aviso",component:x},{path:"**",component:x},{path:"",component:x}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[A.ot,o.u5,n.ez,v.Ps,k.lN,w.c,a.Is,r.Bz.forChild(_)]]}),t})()}}]);