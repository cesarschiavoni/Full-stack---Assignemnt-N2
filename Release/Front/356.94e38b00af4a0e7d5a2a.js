(self.webpackChunkmi_app=self.webpackChunkmi_app||[]).push([[356],{1356:(t,e,a)=>{"use strict";a.r(e),a.d(e,{WalletsModule:()=>at});var i=a(1116),n=a(1041),o=a(4369),r=a(2797),l=a(994),c=a(2935),s=a(3070),u=a(7307),d=a(9550),p=a(7672),g=a(3841),h=a(9199),m=a(4311),f=a(3337),Z=a(1014),w=a(5366),A=a(2693),v=a(9996);class T{constructor(t,e,a,i,n,o,r){this.Id=t,this.Name=e,this.AccountBalanceEth=a,this.TranDate=i,this.Favorite=n,this.Old=o,this.UserKey=r}}var C=a(9438);let N=(()=>{class t{constructor(t,e){this.httpClient=t,this.gb=e,this._url="/api/Wallet",this._url=this.gb.WS+this._url}GetAllWallet(t,e){const a={headers:new A.WM({"Content-Type":"application/json"})};return this.httpClient.get(`${this._url}/GetAllWallet?UserKey=${t}&OrderByFav=${e}`,a).pipe((0,v.U)(t=>t.map(t=>new T(t.Id,t.Name,t.AccountBalanceEth,t.TranDate,t.Favorite,t.Old,t.UserKey))))}GetWallet(t,e){const a={headers:new A.WM({"Content-Type":"application/json"})};return this.httpClient.get(`${this._url}/GetWallet?Id=${t}&UserKey=${e}`,a).pipe((0,v.U)(t=>new T(t.Id,t.Name,t.AccountBalanceEth,t.TranDate,t.Favorite,t.Old,t.UserKey)))}EditWallet(t){const e={headers:new A.WM({"Content-Type":"application/json"})};return this.httpClient.put(this._url+"/EditWallet",t,e).pipe((0,v.U)(t=>t))}AddWallet(t){const e={headers:new A.WM({"Content-Type":"application/json"})};return this.httpClient.post(this._url+"/AddWallet",t,e).pipe((0,v.U)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(w.LFG(A.eN),w.LFG(C.O))},t.\u0275prov=w.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function x(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"div"),w.TgZ(1,"button",3),w.NdJ("click",function(){return w.CHM(t),w.oxw().Regresar(!1)}),w.TgZ(2,"mat-icon",4),w._uU(3,"close"),w.qZA(),w.qZA(),w.qZA()}}function q(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"div"),w.TgZ(1,"button",5),w.NdJ("click",function(){return w.CHM(t),w.oxw().Regresar(!1)}),w.TgZ(2,"mat-icon",4),w._uU(3,"close"),w.qZA(),w.qZA(),w.qZA()}}function _(t,e){1&t&&w._UZ(0,"mat-progress-spinner",6)}function k(t,e){1&t&&(w.TgZ(0,"mat-error"),w._uU(1,"Nombre requerido"),w.qZA())}function y(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"mat-card",7),w.TgZ(1,"form",null,8),w.TgZ(3,"div"),w.TgZ(4,"h2"),w._uU(5),w.qZA(),w.qZA(),w.TgZ(6,"h3"),w._uU(7,"Nombre"),w.qZA(),w.TgZ(8,"mat-form-field",9),w.TgZ(9,"input",10,11),w.NdJ("ngModelChange",function(e){return w.CHM(t),w.oxw().wallet.Name=e}),w.qZA(),w.YNc(11,k,2,0,"mat-error",0),w.qZA(),w.TgZ(12,"h3"),w._uU(13,"Saldo de Ethereum"),w.qZA(),w.TgZ(14,"mat-form-field",9),w.TgZ(15,"input",12),w.NdJ("ngModelChange",function(e){return w.CHM(t),w.oxw().wallet.AccountBalanceEth=e}),w.qZA(),w.qZA(),w.TgZ(16,"mat-checkbox",13),w.NdJ("ngModelChange",function(e){return w.CHM(t),w.oxw().wallet.Favorite=e}),w._uU(17," Favorito "),w.qZA(),w.qZA(),w.TgZ(18,"div",14),w._UZ(19,"br"),w.TgZ(20,"button",15),w.NdJ("click",function(){w.CHM(t);const e=w.MAs(2),a=w.oxw();return a.clickAceptar(),a.Guardar(e.value)}),w._uU(21," Aceptar "),w.qZA(),w.qZA(),w.qZA()}if(2&t){const t=w.MAs(2),e=w.MAs(10),a=w.oxw();w.xp6(5),w.Oqu("editar"===a.operacion?"Editar":"Agregar"),w.xp6(4),w.Q6J("ngModel",a.wallet.Name),w.xp6(2),w.Q6J("ngIf",e.invalid),w.xp6(4),w.Q6J("ngModel",a.wallet.AccountBalanceEth),w.xp6(1),w.Q6J("ngModel",a.wallet.Favorite),w.xp6(2),w.Q6J("hidden",a.clicked),w.xp6(2),w.Q6J("disabled",t.invalid)}}let b=(()=>{class t{constructor(t,e,a,i){this._activeRoute=t,this._WalletsHttpService=e,this._router=a,this.dialog=i,this.isDesktop=!1,this.mostrarCargando=!1,this.wallet={},this.operacion="",this.clicked=!1}ngOnInit(){const t=window.innerWidth;this.isDesktop=!(t<=700);const e=this._activeRoute.snapshot.paramMap.get("id");switch(this.operacion=this._activeRoute.snapshot.paramMap.get("operacion")||"",this.operacion){case"editar":{const t=localStorage.getItem("keyApi")||"";this._WalletsHttpService.GetWallet(Number(e),t).subscribe(t=>this.CargarWallet(t),t=>this.handleError(t),()=>console.log("Wallet:",this.wallet));break}}}handleError(t){}clickAceptar(){this.clicked=!0}CargarWallet(t){this.wallet=t}Regresar(t){this._router.navigate(["/wallet"])}Guardar(t){if(this.mostrarCargando=!0,this.wallet=Object.assign(Object.assign({},this.wallet),t),"editar"===this.operacion)this._WalletsHttpService.EditWallet(this.wallet).subscribe(t=>{if(1==t){this.mostrarCargando=!1;const t=new c.vA;t.autoFocus=!0,t.data={alerta:"Su billetera ha sido modificada correctamente"},this.dialog.open(Z.$,t),this.Regresar(!0)}else{this.mostrarCargando=!1;const t=new c.vA;t.autoFocus=!0,t.data={alerta:"Su billetera NO ha sido creada correctamente"},this.dialog.open(Z.$,t),this.Regresar(!0)}});else{const t=localStorage.getItem("keyApi")||"";this.wallet.UserKey=t,this._WalletsHttpService.AddWallet(this.wallet).subscribe(t=>{if(null!==t){this.mostrarCargando=!1;const t=new c.vA;t.autoFocus=!0,t.data={alerta:"Su billetera ha sido creada correctamente"},this.dialog.open(Z.$,t),this.Regresar(!0)}else{this.mostrarCargando=!1;const t=new c.vA;t.autoFocus=!0,t.data={alerta:"Su billetera NO ha sido creada correctamente"},this.dialog.open(Z.$,t),this.Regresar(!0)}})}}}return t.\u0275fac=function(e){return new(e||t)(w.Y36(f.gz),w.Y36(N),w.Y36(f.F0),w.Y36(c.uw))},t.\u0275cmp=w.Xpm({type:t,selectors:[["app-wallets-edition"]],decls:4,vars:4,consts:[[4,"ngIf"],["style","margin:0 auto;","diameter","300","mode","indeterminate","class","loading",4,"ngIf"],["class","mat-typography",4,"ngIf"],["mat-icon-button","","title","Cerrar",1,"cerrar",2,"right","38px !important",3,"click"],["aria-hidden","false"],["mat-icon-button","","title","Cerrar",1,"cerrar-mov",3,"click"],["diameter","300","mode","indeterminate",1,"loading",2,"margin","0 auto"],[1,"mat-typography"],["f","ngForm"],["appearance","outline",1,"all-width"],["matNativeControl","","required","","name","Name","autocomplete","off","autocapitalize","off","autofocus","",3,"ngModel","ngModelChange"],["Name","ngModel"],["matNativeControl","","required","","type","number","min","0","max","5000","name","AccountBalanceEth",3,"ngModel","ngModelChange"],["name","Favorite",3,"ngModel","ngModelChange"],[3,"hidden"],["matRipple","","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(w.YNc(0,x,4,0,"div",0),w.YNc(1,q,4,0,"div",0),w.YNc(2,_,1,0,"mat-progress-spinner",1),w.YNc(3,y,22,7,"mat-card",2)),2&t&&(w.Q6J("ngIf",e.isDesktop),w.xp6(1),w.Q6J("ngIf",!e.isDesktop),w.xp6(1),w.Q6J("ngIf",e.mostrarCargando),w.xp6(1),w.Q6J("ngIf",e.wallet))},directives:[i.O5,o.lW,u.Hw,p.Ou,r.a8,n._Y,n.JL,n.F,s.KE,d.Nt,n.Fj,n.Q7,n.JJ,n.On,n.qQ,n.Fd,n.wV,l.oG,s.TO],styles:[""]}),t})();function U(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," Id "),w.qZA())}function F(t,e){if(1&t&&(w.TgZ(0,"td",16),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.hij(" ",t.Id," ")}}function M(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," Name "),w.qZA())}function W(t,e){if(1&t&&(w.TgZ(0,"td",16),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.hij(" ",t.Name," ")}}function Y(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," AccountBalanceEth "),w.qZA())}function J(t,e){if(1&t&&(w.TgZ(0,"td",16),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.hij(" ",t.AccountBalanceEth," ")}}function D(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," TranDate "),w.qZA())}function I(t,e){if(1&t&&(w.TgZ(0,"td",16),w._uU(1),w.ALo(2,"date"),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(w.xi3(2,1,t.TranDate,"dd/MM"))}}function Q(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," Favorite "),w.qZA())}function S(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"img",19),w.NdJ("click",function(){w.CHM(t);const e=w.oxw().$implicit;return w.oxw(2).Favorito(e)}),w.qZA()}}function E(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"img",20),w.NdJ("click",function(){w.CHM(t);const e=w.oxw().$implicit;return w.oxw(2).Favorito(e)}),w.qZA()}}function O(t,e){if(1&t&&(w.TgZ(0,"td",16),w.YNc(1,S,1,0,"img",17),w.YNc(2,E,1,0,"img",18),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Q6J("ngIf",t.Favorite),w.xp6(1),w.Q6J("ngIf",!t.Favorite)}}function B(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," Old "),w.qZA())}function H(t,e){if(1&t&&(w.TgZ(0,"td",16),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(t.Old)}}function R(t,e){1&t&&(w.TgZ(0,"th",15),w._uU(1," UserKey "),w.qZA())}function $(t,e){if(1&t&&(w.TgZ(0,"td",16),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(t.UserKey)}}function G(t,e){1&t&&w._UZ(0,"th",15)}function j(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"td",16),w.TgZ(1,"img",21),w.NdJ("click",function(){const e=w.CHM(t).$implicit;return w.oxw(2).Seleccionar(e)}),w.qZA(),w.qZA()}}function K(t,e){1&t&&w._UZ(0,"tr",22)}function z(t,e){1&t&&w._UZ(0,"tr",23),2&t&&w.s9C("matTooltip",e.$implicit.Tooltip)}function L(t,e){if(1&t&&(w.TgZ(0,"div",1),w.TgZ(1,"table",2),w.ynx(2,3),w.YNc(3,U,2,0,"th",4),w.YNc(4,F,2,1,"td",5),w.BQk(),w.ynx(5,6),w.YNc(6,M,2,0,"th",4),w.YNc(7,W,2,1,"td",5),w.BQk(),w.ynx(8,7),w.YNc(9,Y,2,0,"th",4),w.YNc(10,J,2,1,"td",5),w.BQk(),w.ynx(11,8),w.YNc(12,D,2,0,"th",4),w.YNc(13,I,3,4,"td",5),w.BQk(),w.ynx(14,9),w.YNc(15,Q,2,0,"th",4),w.YNc(16,O,3,2,"td",5),w.BQk(),w.ynx(17,10),w.YNc(18,B,2,0,"th",4),w.YNc(19,H,2,1,"td",5),w.BQk(),w.ynx(20,11),w.YNc(21,R,2,0,"th",4),w.YNc(22,$,2,1,"td",5),w.BQk(),w.ynx(23,12),w.YNc(24,G,1,0,"th",4),w.YNc(25,j,2,0,"td",5),w.BQk(),w.YNc(26,K,1,0,"tr",13),w.YNc(27,z,1,1,"tr",14),w.qZA(),w.qZA()),2&t){const t=w.oxw();w.xp6(1),w.Q6J("dataSource",t.wallets),w.xp6(25),w.Q6J("matHeaderRowDef",t.displayedColumns),w.xp6(1),w.Q6J("matRowDefColumns",t.displayedColumns)}}let X=(()=>{class t{constructor(t){this._WalletsHttpService=t,this.wallets=[],this.walletSeleccionada={},this.seleccion=new w.vpe,this.displayedColumns=["Name","AccountBalanceEth","TranDate","Favorite","Old","TranDate","TranDate","Acciones"]}ngOnInit(){}Seleccionar(t){this.walletSeleccionada=t,this.seleccion.emit(t)}Favorito(t){switch(t.Favorite){case!0:t.Favorite=!1;break;case!1:t.Favorite=!0}this._WalletsHttpService.EditWallet(t).subscribe(t=>{1==t&&this.Recargar()})}Recargar(){const t=localStorage.getItem("keyApi")||"";this._WalletsHttpService.GetAllWallet(t,!0).subscribe(t=>this.wallets=t)}}return t.\u0275fac=function(e){return new(e||t)(w.Y36(N))},t.\u0275cmp=w.Xpm({type:t,selectors:[["app-wallets-list"]],inputs:{wallets:"wallets",walletSeleccionada:"walletSeleccionada"},outputs:{seleccion:"seleccion"},decls:1,vars:1,consts:[["class","mat-typography",4,"ngIf"],[1,"mat-typography"],["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","AccountBalanceEth"],["matColumnDef","TranDate"],["matColumnDef","Favorite"],["matColumnDef","Old"],["matColumnDef","UserKey"],["matColumnDef","Acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matTooltip",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["title","Favorito","src","../../assets/img/Menu/estrella-llena.png","class","imglist","style","height: 28px;margin: 10px;",3,"click",4,"ngIf"],["title","Favorito","src","../../assets/img/Menu/estrella-vacia.png","class","imglist","style","height: 28px;margin: 10px;",3,"click",4,"ngIf"],["title","Favorito","src","../../assets/img/Menu/estrella-llena.png",1,"imglist",2,"height","28px","margin","10px",3,"click"],["title","Favorito","src","../../assets/img/Menu/estrella-vacia.png",1,"imglist",2,"height","28px","margin","10px",3,"click"],["title","Editar","src","../../assets/img/Menu/editar.png",1,"imglist",2,"height","28px","margin","10px",3,"click"],["mat-header-row",""],["mat-row","",3,"matTooltip"]],template:function(t,e){1&t&&w.YNc(0,L,28,3,"div",0),2&t&&w.Q6J("ngIf",e.wallets)},directives:[i.O5,h.BZ,h.w1,h.fO,h.Dz,h.as,h.nj,h.ge,h.ev,h.XQ,h.Gk,m.gM],pipes:[i.uU],styles:[""]}),t})();function V(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"div"),w.TgZ(1,"button",5),w.NdJ("click",function(){return w.CHM(t),w.oxw().Regresar()}),w.TgZ(2,"mat-icon",6),w._uU(3,"close"),w.qZA(),w.qZA(),w.qZA()}}function P(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"div"),w.TgZ(1,"button",7),w.NdJ("click",function(){return w.CHM(t),w.oxw().Regresar()}),w.TgZ(2,"mat-icon",6),w._uU(3,"close"),w.qZA(),w.qZA(),w.qZA()}}function tt(t,e){1&t&&w._UZ(0,"mat-progress-spinner",8)}const et=[{path:"",component:(()=>{class t{constructor(t,e){this._WalletData=t,this.router=e,this.isDesktop=!1,this.altura=0,this.ancho=0,this.mostrarCargando=!0,this.wallets=[]}ngOnInit(){this.altura=.2*window.innerHeight,this.ancho=window.innerWidth;const t=localStorage.getItem("keyApi")||"";this._WalletData.GetAllWallet(t,!0).subscribe(t=>(this.mostrarCargando=!1,this.wallets=t));const e=window.innerWidth;this.isDesktop=!(e<=700)}Seleccionar(t){this.router.navigate(["/wallet","editar",t.Id.toString()])}Agregar(){this.router.navigate(["/wallet","agregar","0"])}Regresar(){this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(w.Y36(N),w.Y36(f.F0))},t.\u0275cmp=w.Xpm({type:t,selectors:[["app-wallets-manager"]],decls:11,vars:4,consts:[[1,"mat-typography",2,"height","93%"],[4,"ngIf"],["style","margin:0 auto;","diameter","300","mode","indeterminate","class","loading",4,"ngIf"],[3,"wallets","seleccion"],["mat-raised-button","","color","primary","title","Crear una Billetera",1,"add",3,"click"],["mat-icon-button","","title","Cerrar",1,"cerrar",3,"click"],["aria-hidden","false"],["mat-icon-button","","title","Cerrar",1,"cerrar-mov",3,"click"],["diameter","300","mode","indeterminate",1,"loading",2,"margin","0 auto"]],template:function(t,e){1&t&&(w.TgZ(0,"div",0),w.YNc(1,V,4,0,"div",1),w.YNc(2,P,4,0,"div",1),w.TgZ(3,"mat-card"),w.TgZ(4,"h2"),w._uU(5,"Billeteras"),w.qZA(),w.YNc(6,tt,1,0,"mat-progress-spinner",2),w.TgZ(7,"app-wallets-list",3),w.NdJ("seleccion",function(t){return e.Seleccionar(t)}),w.qZA(),w._UZ(8,"br"),w.TgZ(9,"button",4),w.NdJ("click",function(){return e.Agregar()}),w._uU(10,"+"),w.qZA(),w.qZA(),w.qZA()),2&t&&(w.xp6(1),w.Q6J("ngIf",e.isDesktop),w.xp6(1),w.Q6J("ngIf",!e.isDesktop),w.xp6(4),w.Q6J("ngIf",e.mostrarCargando),w.xp6(1),w.Q6J("wallets",e.wallets))},directives:[i.O5,r.a8,X,o.lW,u.Hw,p.Ou],styles:[""]}),t})()},{path:":operacion/:id",component:b}];let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=w.oAB({type:t}),t.\u0275inj=w.cJS({imports:[[l.p9,o.ot,n.u5,i.ez,u.Ps,n.UX,s.lN,d.c,c.Is,g.LD,m.AV,h.p0,p.Cq,r.QW,f.Bz.forChild(et)]]}),t})()}}]);